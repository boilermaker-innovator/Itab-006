<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iTabs Story Enhancer - Make Any Content Educational</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #f8f9fa;
            line-height: 1.6;
        }

        .hero {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            text-align: center;
            padding: 60px 20px 40px 20px;
        }
        
        .hero h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .hero p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .free-badge {
            background: #4CAF50;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.5em;
            font-weight: bold;
            margin-left: 10px;
            vertical-align: middle;
        }

        .itab-inline {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: transparent;
            color: inherit;
            border: 2px solid currentColor;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 4px;
            transition: all 0.3s ease;
            vertical-align: middle;
            font-family: serif;
        }

        .itab-inline:hover {
            background: rgba(52, 152, 219, 0.1);
            border-color: #3498db;
            color: #3498db;
            transform: scale(1.1);
        }

        .itabs-help-popup {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .itabs-help-popup.active {
            display: flex;
        }

        .itabs-help-content {
            position: relative;
            background-color: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }

        .itabs-help-header {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .itabs-help-header h3 {
            margin: 0;
            font-size: 1.5em;
        }

        .itabs-help-close {
            color: white;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .itabs-help-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .itabs-help-body {
            padding: 30px;
            max-height: calc(80vh - 100px);
            overflow-y: auto;
        }

        .itabs-help-body p {
            color: #4a5568;
            font-size: 1.05em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .container {
            max-width: 1000px;
            margin: -20px auto 40px auto;
            padding: 0 20px;
        }

        .instruction-box {
            background: white;
            border-left: 4px solid #4285F4;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .instruction-box h3 {
            color: #4285F4;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .instruction-box ol {
            margin-left: 20px;
            color: #333;
        }

        .instruction-box li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .demo-note {
            margin-top: 15px;
            padding: 15px;
            background: #e8f4f8;
            border-radius: 8px;
            color: #2980b9;
            font-weight: 600;
        }

        .source-note {
            margin-top: 10px;
            padding: 12px;
            background: #f0f0f0;
            border-radius: 8px;
            font-size: 0.9em;
            color: #666;
        }

        .source-note a {
            color: #3498db;
            text-decoration: none;
        }

        .source-note a:hover {
            text-decoration: underline;
        }

        .form-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .form-section h2 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .ai-section {
            background: linear-gradient(135deg, #E8F4F8 0%, #D6EAF8 100%);
            border: 2px solid #3498db;
        }

        .ai-section h2 {
            color: #3498db;
        }

        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 1.05em;
        }
        
        input[type="text"],
        input[type="password"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 15px;
            font-family: Arial, sans-serif;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3498db;
        }
        
        textarea {
            resize: vertical;
            font-family: inherit;
        }

        textarea.story-input {
            min-height: 200px;
            font-size: 14px;
            line-height: 1.6;
        }

        small {
            color: #666;
            display: block;
            margin-top: 6px;
            font-size: 13px;
        }

        .checkbox-group {
            margin-top: 10px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            cursor: pointer;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-enhance {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            flex: 1;
            font-size: 18px;
        }

        .btn-enhance:hover:not(:disabled) {
            background: linear-gradient(135deg, #2980b9 0%, #21618c 100%);
        }
        
        .btn-clear {
            background: #f44336;
            color: white;
        }
        
        .btn-clear:hover {
            background: #da190b;
        }
        
        .btn-copy {
            background: #2196F3;
            color: white;
            width: 100%;
        }
        
        .btn-copy:hover {
            background: #0b7dda;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 25px;
            color: #666;
        }

        .loading.active {
            display: block;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            display: none;
        }

        .error-message.active {
            display: block;
        }

        .success-message {
            display: none;
            background: #4CAF50;
            color: white;
            padding: 12px;
            border-radius: 6px;
            margin-top: 15px;
            text-align: center;
            font-weight: 600;
        }
        
        .success-message.active {
            display: block;
        }

        .results-section {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .results-section.active {
            display: block;
        }

        .results-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .preview-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
        }

        .preview-box h3 {
            color: #3498db;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .enhanced-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.8;
            font-size: 1.05em;
            max-height: 400px;
            overflow-y: auto;
            color: #333;
        }

        .code-section {
            margin-top: 30px;
        }

        .code-section h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.5em;
        }
        
        .code-box {
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 15px;
            word-wrap: break-word;
            white-space: pre-wrap;
            line-height: 1.5;
        }

        .stats-box {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .stats-box h4 {
            color: #2980b9;
            margin-bottom: 10px;
        }

        .stats-box ul {
            list-style: none;
            padding: 0;
        }

        .stats-box li {
            padding: 5px 0;
            color: #4a5568;
        }

        .itab-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: transparent;
            color: inherit;
            border: 2px solid currentColor;
            border-radius: 50%;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
            margin: 0 4px;
            vertical-align: middle;
            font-family: serif;
            transition: all 0.3s;
        }
        
        .itab-btn:hover {
            background: rgba(52, 152, 219, 0.1);
            border-color: #3498db;
            color: #3498db;
            transform: scale(1.15);
        }
        
        .itab-popup {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .itab-popup.active {
            display: flex;
        }
        
        .itab-popup-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .itab-popup-content h3 {
            color: #3498db;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .itab-popup-content p {
            color: #4a5568;
            line-height: 1.7;
            font-size: 1.05em;
            margin-bottom: 20px;
        }

        .itab-learn-more {
            display: inline-block;
            color: #3498db;
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            border: 2px solid #3498db;
            border-radius: 6px;
            transition: all 0.3s;
        }

        .itab-learn-more:hover {
            background: #3498db;
            color: white;
        }
        
        .itab-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 30px;
            color: #999;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .itab-close:hover {
            background: #f0f0f0;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="hero">
        <h1>iTabs Story Enhancer<span class="free-badge">100% FREE</span></h1>
        <p>Transform any content into an educational experience</p>
    </div>

    <div class="container">
        <div class="instruction-box">
            <h3>üöÄ How It Works:</h3>
            <ol>
                <li>Paste any article or text below (or try the pre-loaded example)</li>
                <li>Click "Enhance with iTabs" to see the magic</li>
                <li>Look for hollow circle buttons - click them!</li>
                <li>Copy the HTML code to use anywhere</li>
            </ol>
            <div class="demo-note">üí° This prototype adds 4 iTabs to the most complex terms</div>
        </div>

        <div class="form-section ai-section">
            <h2>‚ú® Paste Your Content</h2>
            
            <div class="form-group">
                <label for="storyInput">üìù Your Article/Story:</label>
                <textarea id="storyInput" class="story-input">Computer science is the study of computing, which includes all phenomena related to computers, such as the Internet. With foundations in engineering and mathematics, computer science focuses on studying algorithms. An algorithm is a sequence of precise instructions that enables computing. This includes components computers use to process information.

All computers are made of physical, real-world material that we refer to as hardware. Hardware has four components, including processor, memory, network, and storage. The processor can be regarded as the computer's "brain," as it follows instructions from algorithms and processes data. The memory is a means of addressing information in a computer by storing it in consistent locations, while the network refers to the various technological devices that are connected and share information.

Almost all computers are considered Turing-complete because they share the same fundamental model for computing results and every computer has the ability to run any algorithm. Alan Mathison Turing was an English mathematician who was highly influential in the development of theoretical computer science, which focuses on the mathematical processes behind software.

The digital divide has emerged as a significant issue, as many aspects of society including education, employment, and social mobility become tied to computing, computer science, and connectivity. The divide refers to the uneven and unequal access and distribution of technology across populations from different geographies, socioeconomic statuses, races, ethnicities, and other differentiators.</textarea>
                <small><span style="color: #28a745; font-weight: 600;">‚úÖ Pre-filled with computer science intro for 1st year students</span></small>
                <div class="source-note">
                    üìö Source: <a href="https://openstax.org/books/introduction-computer-science/pages/1-1-computer-science" target="_blank">OpenStax - Introduction to Computer Science</a>
                </div>
            </div>

            <div class="form-group">
                <label for="audienceLevel">
                    üë• Target Audience
                    <button class="itab-inline" onclick="showHelp('audience')">i</button>
                </label>
                <select id="audienceLevel">
                    <option value="general">General Public</option>
                    <option value="highschool" selected>High School Students</option>
                    <option value="college">College Students</option>
                    <option value="expert">Experts</option>
                </select>
            </div>

            <div class="button-group">
                <button class="btn-enhance" onclick="enhanceContent()">‚ú® Enhance with iTabs</button>
                <button class="btn-clear" onclick="clearForm()">üîÑ Clear</button>
            </div>

            <div class="loading" id="loading">
                <div class="loading-spinner"></div>
                <p id="loadingText">Finding the most complex terms...</p>
            </div>

            <div class="error-message" id="errorMessage"></div>
        </div>

        <div class="results-section" id="resultsSection">
            <h2>‚ú® Your Enhanced Content</h2>
            
            <div class="stats-box">
                <h4>üìä Summary:</h4>
                <ul id="statsList"></ul>
            </div>

            <div class="preview-box">
                <h3>üëÄ Preview (look for hollow circles - click them!):</h3>
                <div class="enhanced-content" id="previewContent"></div>
            </div>

            <div class="code-section">
                <h3>üìã Copy HTML Code</h3>
                <div class="code-box" id="codeBox"></div>
                <button class="btn-copy" onclick="copyCode()">üìã Copy Code</button>
                <div class="success-message" id="successMessage">‚úÖ Copied to clipboard!</div>
            </div>
        </div>
    </div>

    <!-- Help Popups -->
    <div class="itabs-help-popup" id="helpPopupAudience">
        <div class="itabs-help-content">
            <div class="itabs-help-header">
                <h3>üë• Target Audience</h3>
                <button class="itabs-help-close" onclick="closeHelp('audience')">&times;</button>
            </div>
            <div class="itabs-help-body">
                <p><strong>Choose your audience level:</strong></p>
                <p><strong>General Public:</strong> Explain everything in simple terms<br>
                <strong>High School:</strong> Balanced explanations<br>
                <strong>College:</strong> More technical depth<br>
                <strong>Experts:</strong> Minimal explanations</p>
            </div>
        </div>
    </div>

    <script>
        console.log('iTabs Story Enhancer - Computer Science Demo');
        
        // Top 4 most complex CS terms
        const termDatabase = {
            'algorithm': {
                term: 'algorithm',
                explanation: 'A sequence of precise, step-by-step instructions that solves a problem or completes a task. Like a recipe for cooking, an algorithm tells a computer exactly what to do in order. For example, Google\'s search algorithm decides which websites to show you first when you search for something.',
                wiki: 'https://en.wikipedia.org/wiki/Algorithm',
                priority: 1
            },
            'hardware': {
                term: 'hardware',
                explanation: 'The physical parts of a computer you can actually touch - like the screen, keyboard, processor chip, and hard drive. Think of it like the body parts of a computer. Without hardware, software (the programs) would have nowhere to run.',
                wiki: 'https://en.wikipedia.org/wiki/Computer_hardware',
                priority: 2
            },
            'Turing-complete': {
                term: 'Turing-complete',
                explanation: 'A computer or programming language that can solve any problem that\'s theoretically solvable by computation, given enough time and memory. Named after Alan Turing, this means a smartphone and a 1940s room-sized computer can technically run the same programs - just at very different speeds.',
                wiki: 'https://en.wikipedia.org/wiki/Turing_completeness',
                priority: 3
            },
            'digital divide': {
                term: 'digital divide',
                explanation: 'The gap between people who have access to modern technology (computers, Internet, smartphones) and those who don\'t. This divide often follows lines of wealth, geography, and education. For example, students without home Internet struggled more during COVID-19 remote learning, showing how the digital divide affects real opportunities.',
                wiki: 'https://en.wikipedia.org/wiki/Digital_divide',
                priority: 4
            }
        };

        function showHelp(type) {
            const helpMap = {
                'audience': 'helpPopupAudience'
            };
            const popup = document.getElementById(helpMap[type]);
            if (popup) {
                popup.classList.add('active');
            }
        }

        function closeHelp(type) {
            const helpMap = {
                'audience': 'helpPopupAudience'
            };
            const popup = document.getElementById(helpMap[type]);
            if (popup) {
                popup.classList.remove('active');
            }
        }

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('itabs-help-popup')) {
                e.target.classList.remove('active');
            }
        });

        function enhanceContent() {
            console.log('Enhance button clicked');
            
            const story = document.getElementById('storyInput').value.trim();
            
            if (!story) {
                showError('Please paste some content to enhance');
                return;
            }
            
            const loading = document.getElementById('loading');
            const btn = document.querySelector('.btn-enhance');
            const errorMsg = document.getElementById('errorMessage');
            
            errorMsg.classList.remove('active');
            loading.classList.add('active');
            btn.disabled = true;
            
            setTimeout(function() {
                try {
                    const foundTerms = [];
                    const storyLower = story.toLowerCase();
                    
                    // Find terms and sort by priority
                    for (let key in termDatabase) {
                        const searchTerm = key.toLowerCase();
                        if (storyLower.includes(searchTerm)) {
                            foundTerms.push(termDatabase[key]);
                        }
                    }
                    
                    foundTerms.sort((a, b) => a.priority - b.priority);
                    
                    // Limit to top 4
                    const topTerms = foundTerms.slice(0, 4);
                    
                    console.log('Found terms:', topTerms.length);
                    
                    if (topTerms.length === 0) {
                        showError('No complex terms found. Try the sample text or paste content about computer science, technology, or education.');
                        loading.classList.remove('active');
                        btn.disabled = false;
                        return;
                    }
                    
                    generatePreview(story, topTerms);
                    
                    loading.classList.remove('active');
                    btn.disabled = false;
                    document.getElementById('resultsSection').classList.add('active');
                    
                    setTimeout(function() {
                        document.getElementById('resultsSection').scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }, 100);
                    
                } catch (error) {
                    console.error('Enhancement error:', error);
                    showError('Something went wrong. Please try again.');
                    loading.classList.remove('active');
                    btn.disabled = false;
                }
            }, 1500);
        }

        function clearForm() {
            const defaultText = `Computer science is the study of computing, which includes all phenomena related to computers, such as the Internet. With foundations in engineering and mathematics, computer science focuses on studying algorithms. An algorithm is a sequence of precise instructions that enables computing. This includes components computers use to process information.

All computers are made of physical, real-world material that we refer to as hardware. Hardware has four components, including processor, memory, network, and storage. The processor can be regarded as the computer's "brain," as it follows instructions from algorithms and processes data. The memory is a means of addressing information in a computer by storing it in consistent locations, while the network refers to the various technological devices that are connected and share information.

Almost all computers are considered Turing-complete because they share the same fundamental model for computing results and every computer has the ability to run any algorithm. Alan Mathison Turing was an English mathematician who was highly influential in the development of theoretical computer science, which focuses on the mathematical processes behind software.

The digital divide has emerged as a significant issue, as many aspects of society including education, employment, and social mobility become tied to computing, computer science, and connectivity. The divide refers to the uneven and unequal access and distribution of technology across populations from different geographies, socioeconomic statuses, races, ethnicities, and other differentiators.`;
            
            document.getElementById('storyInput').value = defaultText;
            document.getElementById('resultsSection').classList.remove('active');
            document.getElementById('errorMessage').classList.remove('active');
        }

        function showError(msg) {
            const error = document.getElementById('errorMessage');
            error.textContent = '‚ö†Ô∏è ' + msg;
            error.classList.add('active');
            setTimeout(function() {
                error.classList.remove('active');
            }, 6000);
        }

        function generatePreview(text, terms) {
            let enhanced = text;
            let count = 0;
            let popupHTML = '';
            
            terms.forEach(function(termObj, i) {
                const id = 'term_' + i;
                const term = termObj.term;
                
                const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                const regex = new RegExp('\\b(' + escapedTerm + ')\\b', 'i');
                
                const match = enhanced.match(regex);
                if (match) {
                    const matchedText = match[1];
                    enhanced = enhanced.replace(
                        regex,
                        matchedText + ' <button class="itab-btn" onclick="showTerm(\'' + id + '\')">i</button>'
                    );
                    
                    popupHTML += `
                        <div class="itab-popup" id="${id}">
                            <div class="itab-popup-content">
                                <button class="itab-close" onclick="closeTerm('${id}')">&times;</button>
                                <h3>${termObj.term}</h3>
                                <p>${termObj.explanation}</p>
                                <a href="${termObj.wiki}" target="_blank" class="itab-learn-more">Learn more ‚Üí</a>
                            </div>
                        </div>
                    `;
                    
                    count++;
                }
            });
            
            document.getElementById('statsList').innerHTML = `
                <li><strong>${count}</strong> iTabs added (top ${count} most complex terms)</li>
                <li><strong>${text.split(/\s+/).length}</strong> words processed</li>
                <li><strong>Visible design</strong> - easy to spot, not overwhelming</li>
            `;
            
            document.getElementById('previewContent').innerHTML = enhanced + popupHTML;
            
            const fullHTML = generateFullHTML(enhanced, popupHTML);
            document.getElementById('codeBox').textContent = fullHTML;
        }

        function generateFullHTML(enhancedText, popupHTML) {
            return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iTabs Enhanced Content</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            line-height: 1.8;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            color: #333;
        }
        .itab-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: transparent;
            color: inherit;
            border: 2px solid currentColor;
            border-radius: 50%;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
            margin: 0 4px;
            vertical-align: middle;
            font-family: serif;
            transition: all 0.3s;
        }
        .itab-btn:hover {
            background: rgba(52, 152, 219, 0.1);
            border-color: #3498db;
            color: #3498db;
            transform: scale(1.15);
        }
        .itab-popup {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .itab-popup.active {
            display: flex;
        }
        .itab-popup-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .itab-popup-content h3 {
            color: #3498db;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        .itab-popup-content p {
            color: #4a5568;
            line-height: 1.7;
            font-size: 1.05em;
            margin-bottom: 20px;
        }
        .itab-learn-more {
            display: inline-block;
            color: #3498db;
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            border: 2px solid #3498db;
            border-radius: 6px;
            transition: all 0.3s;
        }
        .itab-learn-more:hover {
            background: #3498db;
            color: white;
        }
        .itab-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 30px;
            color: #999;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
        .itab-close:hover {
            background: #f0f0f0;
            color: #333;
        }
    </style>
</head>
<body>
    ${enhancedText}
    ${popupHTML}
    
    <script>
        function showTerm(id) {
            document.getElementById(id).classList.add('active');
        }
        function closeTerm(id) {
            document.getElementById(id).classList.remove('active');
        }
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('itab-popup')) {
                e.target.classList.remove('active');
            }
        });
    <\/script>
</body>
</html>`;
        }

        function showTerm(id) {
            const popup = document.getElementById(id);
            if (popup) {
                popup.classList.add('active');
            }
        }

        function closeTerm(id) {
            const popup = document.getElementById(id);
            if (popup) {
                popup.classList.remove('active');
            }
        }

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('itab-popup')) {
                e.target.classList.remove('active');
            }
        });

        function copyCode() {
            const code = document.getElementById('codeBox').textContent;
            navigator.clipboard.writeText(code).then(function() {
                const msg = document.getElementById('successMessage');
                msg.classList.add('active');
                setTimeout(function() {
                    msg.classList.remove('active');
                }, 3000);
            }).catch(function(err) {
                console.error('Copy failed:', err);
                showError('Could not copy to clipboard. Please select and copy manually.');
            });
        }
    </script>
</body>
</html>
